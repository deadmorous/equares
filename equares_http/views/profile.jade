extends page
block vars
    - var title = 'User profile'
block otherCss
    style.
        .mymain {
            padding: 10px;
        }
        #userprofile {
            margin-left: 10px;
        }
        #userprofile td {
            padding: 10px;
        }
        #userprofileactions {
            margin-left: 20px;
            width: 250px;
        }
        #message{
            color: #c00;
            font-weight: bold;
            margin-left: 20px;
        }

block otherScripts
    script.
        ctm.initPage.push(function(c1, c2, c3) {
            $('#userprofileactions').menu()

            var reload = location.reload.bind(location)
            $('#after_login_action').click(reload)
            $('#after_logout_action').click(reload)
        })

block content
    if message
        h1 Important information
        p#message= message
    if user
        h1 Account details
        table#userprofile
            tr
                td: b Username:
                td #{user.username}
            tr
                td: b Email:
                td #{user.email}
            if user.activation_code !== 'X'
                tr
                    td: b Activated?
                    if message
                        td No
                    else
                        td(style='color: #c00;') No! To activate your account, please follow the link in the message sent to your email address.
        h1 Actions
        ul#userprofileactions
            li: a(href='/profile/changepassword') Change password
            li: a(href='/profile/changeemail') Change email address
            li: a(href='/profile/deleteaccount') Delete account
    else
        h1 You are not logged in

block extras
    #after_login_action(display='none')
    #after_logout_action(display='none')
