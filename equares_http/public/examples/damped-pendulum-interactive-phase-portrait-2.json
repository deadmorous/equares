{"name":"damped-pendulum-interactive-phase-portrait-2","description":"Damped pendulum, interactive phase portrait, #2","info":"# Interactive phase portrait of a damped pendulum\n\nThis example generates one phase trajectory of a damped pendulum each time users clicks on the image representing the phase plane. The trajectory goes in both directions from the point clicked.\n\nFor more information, please see =[this simulation](/editor?sim=damped-pendulum-interactive-phase-portrait).","keywords":["phase trajectory","pendulum"],"script":"","public":true,"definition":"{\"boxes\":[{\"name\":\"odeParam\",\"info\":{\"inputs\":[],\"outputs\":[{\"name\":\"output\",\"help\":\"Parameter data; port format is determined by peer\",\"pos\":3.5}]},\"type\":\"Param\",\"props\":{\"data\":{\"value\":{\"l\":\"1\",\"g\":\"9.8\",\"n\":\"0.2\"}}},\"status\":{\"level\":\"ok\",\"text\":\"Ok\"},\"x\":170.671875,\"y\":135,\"ports\":[{\"pos\":3.5}]},{\"name\":\"initState\",\"info\":{\"inputs\":[],\"outputs\":[{\"name\":\"output\",\"help\":\"Parameter data; port format is determined by peer\",\"pos\":3.5}]},\"type\":\"Param\",\"props\":{\"data\":{\"value\":{\"q\":0,\"dq\":0,\"t\":0}}},\"status\":{\"level\":\"ok\",\"text\":\"Ok\"},\"x\":488.671875,\"y\":62,\"ports\":[{\"pos\":3.5}]},{\"name\":\"ode\",\"info\":{\"inputs\":[{\"name\":\"parameters\",\"format\":[3],\"help\":\"Parameters of ODE system\",\"hints\":[\"l\",\"g\",\"n\"],\"pos\":1.5},{\"name\":\"state\",\"format\":[3],\"help\":\"State variables of ODE system, including the time\",\"hints\":[\"q\",\"dq\",\"t\"],\"pos\":0.7}],\"outputs\":[{\"name\":\"oderhs\",\"format\":[2],\"help\":\"Right hand side of ODE system\",\"pos\":0.3}]},\"type\":\"CxxOde\",\"props\":{\"src\":{\"value\":\"#include <cmath>\\n\\nstruct DampedPendulum {\\n    int paramCount() const {\\n        return 3;       // l, g, n\\n    }\\n    const char *paramNames() const {\\n        return \\\"l,g,n\\\";   // Can also return empty string or null ptr\\n    }\\n    int varCount() const {\\n        return 2;       // q, dq\\n    }\\n    const char *varNames() const {\\n        return \\\"q,dq\\\";  // Can also return empty string or null ptr\\n    }\\n\\n    // Auxiliary parameters\\n    double g_l, _2n;\\n    void prepare(const double *param) {\\n        g_l = param[1]/param[0];\\n        _2n = 2*param[2];\\n    }\\n\\n    void rhs(double *out, const double *param, const double *state) const {\\n        out[0] = state[1];\\n        out[1] = -g_l * sin(state[0]) - _2n*state[1];\\n    }\\n};\\n\"},\"srcExample\":{\"value\":\"#include <cmath>\\n\\nstruct pendulum {\\n    int paramCount() const {\\n        return 2;       // l, g\\n    }\\n    const char *paramNames() const {\\n        return \\\"l,g\\\";   // Can also return empty string or null ptr\\n    }\\n    int varCount() const {\\n        return 2;       // q, dq\\n    }\\n    const char *varNames() const {\\n        return \\\"q,dq\\\";  // Can also return empty string or null ptr\\n    }\\n\\n    // Auxiliary parameters\\n    double g_l;\\n    void prepare(const double *param) {\\n        g_l = param[1]/param[0];\\n    }\\n\\n    void rhs(double *out, const double *param, const double *state) const {\\n        out[0] = state[1];\\n        out[1] = -g_l * sin(state[0]);\\n    }\\n};\\n\"},\"useQmake\":{\"value\":true}},\"status\":{\"level\":\"ok\",\"text\":\"Ok\"},\"x\":193.671875,\"y\":204,\"ports\":[{\"pos\":1.5},{\"pos\":0.7},{\"pos\":0.3}]},{\"name\":\"solver\",\"info\":{\"inputs\":[{\"name\":\"parameters\",\"format\":[3],\"help\":\"Time step, number of integration steps to take (0 means infinite), number of steps between outputs (0 means output final state only)\",\"hints\":[\"h\",\"n\",\"nout\"],\"pos\":1.7},{\"name\":\"initState\",\"help\":\"Initial state for the ODE system\",\"pos\":1.3},{\"name\":\"rhs\",\"help\":\"Right hand side of the ODE system\",\"pos\":2.7},{\"name\":\"stop\",\"help\":\"Any data on this port causes solver to terminate\",\"pos\":0.5}],\"outputs\":[{\"name\":\"nextState\",\"help\":\"Next state of the ODE system\",\"pos\":3.7},{\"name\":\"rhsState\",\"help\":\"System state to pass to the ODE right hand side calculator\",\"pos\":2.3},{\"name\":\"finish\",\"format\":[0],\"help\":\"Data is emitted to this port as soon as the integration finishes\",\"pos\":3.3}]},\"type\":\"Rk4\",\"props\":{},\"status\":{\"level\":\"ok\",\"text\":\"Ok\"},\"x\":326.671875,\"y\":204,\"ports\":[{\"pos\":1.7135574554755588},{\"pos\":1.2255288461538463},{\"pos\":2.7},{\"pos\":0.5},{\"pos\":3.8531015478424013},{\"pos\":2.3},{\"pos\":3.1989583333333336}]},{\"name\":\"canvas\",\"info\":{\"inputs\":[{\"name\":\"input\",\"format\":[2],\"help\":\"2D input for canvas\",\"pos\":1.3},{\"name\":\"flush\",\"help\":\"Any incoming signal on this port causes this canvas to flush its data (i.e., pass the entire canvas data to the output port)\",\"pos\":1.7},{\"name\":\"clear\",\"help\":\"Any incoming signal on this port causes this canvas to clear its data and then flush\",\"pos\":2.5}],\"outputs\":[{\"name\":\"output\",\"format\":[100,100],\"help\":\"Canvas output (each data point is a 2D array of canvas cell data)\",\"pos\":3.5}]},\"type\":\"Canvas\",\"props\":{\"param\":{\"value\":{\"x\":{\"vmin\":\"-6\",\"vmax\":\"6\",\"resolution\":350},\"y\":{\"vmin\":\"-12\",\"vmax\":\"12\",\"resolution\":350}}},\"refreshInterval\":{\"value\":0},\"timeCheckCount\":{\"value\":100},\"clearOnRestart\":{\"value\":false}},\"status\":{\"level\":\"ok\",\"text\":\"Ok\"},\"x\":351.671875,\"y\":385,\"ports\":[{\"pos\":1.3159406565656566},{\"pos\":1.762405303030303},{\"pos\":2.5},{\"pos\":0.551923360595283}]},{\"name\":\"bitmap\",\"info\":{\"inputs\":[{\"name\":\"input\",\"help\":\"2D input for bitmap\",\"pos\":1.5}],\"outputs\":[]},\"type\":\"Bitmap\",\"props\":{\"fileName\":{\"value\":\"result.png\"}},\"status\":{\"level\":\"ok\",\"text\":\"Ok\"},\"x\":473.671875,\"y\":384,\"ports\":[{\"pos\":2.4703857944357686}]},{\"name\":\"proj\",\"info\":{\"inputs\":[{\"name\":\"input\",\"help\":\"Incoming points (each point is a vector)\",\"pos\":1.5}],\"outputs\":[{\"name\":\"output\",\"format\":[0],\"help\":\"Point projections onto hyperplane determined by the 'indices' property\",\"pos\":3.5}]},\"type\":\"Projection\",\"props\":{\"indices\":{\"value\":[0,1]}},\"status\":{\"level\":\"ok\",\"text\":\"Ok\"},\"x\":389.65625,\"y\":278,\"ports\":[{\"pos\":1.8003},{\"pos\":3.3977564102564104}]},{\"name\":\"isInput\",\"info\":{\"inputs\":[{\"name\":\"activator\",\"help\":\"Activation port\",\"pos\":1.3},{\"name\":\"input\",\"help\":\"Input data port\",\"pos\":1.7}],\"outputs\":[{\"name\":\"output\",\"help\":\"Output data port\",\"pos\":3.5}]},\"type\":\"PointInput\",\"props\":{\"transform\":{\"value\":{\"x\":{\"index\":0,\"vmin\":\"-6\",\"vmax\":\"6\",\"resolution\":350},\"y\":{\"index\":1,\"vmin\":\"-12\",\"vmax\":\"12\",\"resolution\":350}}},\"refBitmap\":{\"value\":\"result.png\"}},\"status\":{\"level\":\"ok\",\"text\":\"Ok\"},\"x\":510,\"y\":118,\"ports\":[{\"pos\":1.2925837320574163},{\"pos\":1.669360902255639},{\"pos\":2.611764705882353}]},{\"name\":\"isSplit\",\"info\":{\"inputs\":[{\"name\":\"input\",\"help\":\"Input data port\",\"pos\":1.5}],\"outputs\":[{\"name\":\"out_1\",\"help\":\"Output data port 1\",\"pos\":3.3},{\"name\":\"out_2\",\"help\":\"Output data port 2\",\"pos\":3.7}]},\"type\":\"Split\",\"props\":{\"outputPortCount\":{\"value\":2}},\"status\":{\"level\":\"ok\",\"text\":\"Ok\"},\"x\":364,\"y\":63,\"ports\":[{\"pos\":0.5},{\"pos\":3.3677309782608695},{\"pos\":2.455423656955969}]},{\"name\":\"replicator\",\"info\":{\"inputs\":[{\"name\":\"control_in\",\"help\":\"Controlling value input port\",\"pos\":1.7},{\"name\":\"value_in\",\"help\":\"Replicated value input port\",\"pos\":1.3}],\"outputs\":[{\"name\":\"control_out\",\"help\":\"Controlling value output port\",\"pos\":3.3},{\"name\":\"value_out\",\"help\":\"Replicated value output port\",\"pos\":3.7}]},\"type\":\"Replicator\",\"props\":{},\"status\":{\"level\":\"ok\",\"text\":\"Ok\"},\"x\":318,\"y\":133,\"ports\":[{\"pos\":1.9375704887218046},{\"pos\":1.3},{\"pos\":3.3},{\"pos\":3.7}]},{\"name\":\"solverParam\",\"info\":{\"inputs\":[{\"help\":\"Actovation port\",\"name\":\"activator\",\"pos\":1.5}],\"outputs\":[{\"name\":\"output\",\"help\":\"Parameter data; port format is determined by peer\",\"pos\":3.3},{\"name\":\"flush\",\"format\":[0],\"help\":\"Signal indicating that all frames have been generated\",\"pos\":3.7}]},\"type\":\"ParamArray\",\"props\":{\"data\":{\"value\":[{\"h\":\"0.001\",\"n\":\"10000\",\"nout\":\"1\"},{\"h\":\"-0.001\",\"n\":\"10000\",\"nout\":\"1\"}]},\"withActivator\":{\"value\":true}},\"status\":{\"level\":\"ok\",\"text\":\"Ok\"},\"x\":202,\"y\":62,\"ports\":[{\"pos\":0.5294117647058824},{\"pos\":3.8929940078037903},{\"pos\":2.4746323529411764}]},{\"name\":\"flushFilter\",\"info\":{\"inputs\":[{\"name\":\"count\",\"format\":[1],\"help\":\"Counter value for the filter\",\"hints\":[\"count\"],\"pos\":0.5},{\"name\":\"input\",\"help\":\"Incoming points\",\"pos\":2.5}],\"outputs\":[{\"name\":\"output\",\"help\":\"Filtered points\",\"pos\":1.5}]},\"type\":\"CountedFilter\",\"props\":{},\"status\":{\"level\":\"ok\",\"text\":\"Ok\"},\"x\":261,\"y\":278,\"ports\":[{\"pos\":2.5},{\"pos\":1.29255408117752},{\"pos\":3.96932976408612}]},{\"name\":\"flushFilterParam\",\"info\":{\"inputs\":[],\"outputs\":[{\"name\":\"output\",\"help\":\"Parameter data; port format is determined by peer\",\"pos\":3.5}]},\"type\":\"Param\",\"props\":{\"data\":{\"value\":{\"count\":\"2\"}}},\"status\":{\"level\":\"ok\",\"text\":\"Ok\"},\"x\":64,\"y\":276,\"ports\":[{\"pos\":0.4495798319327731}]},{\"name\":\"clickedPoints\",\"info\":{\"inputs\":[{\"name\":\"input\",\"help\":\"Input data\",\"pos\":1.3},{\"name\":\"flush\",\"help\":\"Any incoming signal on this port causes this box to flush its file stream\",\"pos\":1.7}],\"outputs\":[]},\"type\":\"Dump\",\"props\":{\"fileName\":{\"value\":\"clickedPoints.txt\"}},\"status\":{\"level\":\"ok\",\"text\":\"Ok\"},\"x\":462,\"y\":177,\"ports\":[{\"pos\":1.7218934911242605},{\"pos\":1.9107692307692308}]},{\"name\":\"pause\",\"info\":{\"inputs\":[{\"name\":\"activator\",\"help\":\"Activation port\",\"pos\":1.5}],\"outputs\":[]},\"type\":\"Pause\",\"props\":{},\"status\":{\"level\":\"ok\",\"text\":\"Ok\"},\"x\":134,\"y\":388,\"ports\":[{\"pos\":1.5}]}],\"links\":[{\"source\":{\"box\":\"solver\",\"port\":\"nextState\"},\"target\":{\"box\":\"proj\",\"port\":\"input\"}},{\"source\":{\"box\":\"initState\",\"port\":\"output\"},\"target\":{\"box\":\"isInput\",\"port\":\"input\"}},{\"source\":{\"box\":\"ode\",\"port\":\"parameters\"},\"target\":{\"box\":\"odeParam\",\"port\":\"output\"}},{\"source\":{\"box\":\"ode\",\"port\":\"state\"},\"target\":{\"box\":\"solver\",\"port\":\"rhsState\"}},{\"source\":{\"box\":\"ode\",\"port\":\"oderhs\"},\"target\":{\"box\":\"solver\",\"port\":\"rhs\"}},{\"source\":{\"box\":\"canvas\",\"port\":\"output\"},\"target\":{\"box\":\"bitmap\",\"port\":\"input\"}},{\"source\":{\"box\":\"proj\",\"port\":\"output\"},\"target\":{\"box\":\"canvas\",\"port\":\"input\"}},{\"source\":{\"box\":\"isSplit\",\"port\":\"input\"},\"target\":{\"box\":\"isInput\",\"port\":\"output\"}},{\"source\":{\"box\":\"replicator\",\"port\":\"value_out\"},\"target\":{\"box\":\"solver\",\"port\":\"initState\"}},{\"source\":{\"box\":\"isSplit\",\"port\":\"out_1\"},\"target\":{\"box\":\"replicator\",\"port\":\"value_in\"}},{\"source\":{\"box\":\"solver\",\"port\":\"parameters\"},\"target\":{\"box\":\"replicator\",\"port\":\"control_out\"}},{\"source\":{\"box\":\"solverParam\",\"port\":\"activator\"},\"target\":{\"box\":\"isSplit\",\"port\":\"out_2\"}},{\"source\":{\"box\":\"solverParam\",\"port\":\"output\"},\"target\":{\"box\":\"replicator\",\"port\":\"control_in\"}},{\"source\":{\"box\":\"flushFilterParam\",\"port\":\"output\"},\"target\":{\"box\":\"flushFilter\",\"port\":\"count\"}},{\"source\":{\"box\":\"flushFilter\",\"port\":\"input\"},\"target\":{\"box\":\"solver\",\"port\":\"finish\"}},{\"source\":{\"box\":\"flushFilter\",\"port\":\"output\"},\"target\":{\"box\":\"canvas\",\"port\":\"flush\"}},{\"source\":{\"box\":\"isInput\",\"port\":\"output\"},\"target\":{\"box\":\"clickedPoints\",\"port\":\"flush\"}},{\"source\":{\"box\":\"isInput\",\"port\":\"output\"},\"target\":{\"box\":\"clickedPoints\",\"port\":\"input\"}}]}"}