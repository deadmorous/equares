{"name":"interactive-phase-portrait-1","description":"Interactive phase portrait, #1","info":"# Interactive phase portrait, part 1\n\nThis example starts the ?[interactive phase portrait tutorial](/doc#tut/-/interactive-phase-portrait).\n\nThe objective is to have a simulation that adds phase trajectories that pass through points user clicks on the phase plane.\n\nIn this part, we provide the general workflow of the simulation. One phase curve is displayed, no interactive input is supported yet.\n","keywords":["phase portrait","phase trajectory","tutorial","tutorial interactive-phase-portrait","tutorial-order 100"],"script":"var h = 0.001\n","public":true,"definition":"{\"boxes\":[{\"name\":\"odeParam\",\"type\":\"Param\",\"props\":{\"data\":{\"value\":{\"l\":\"1\",\"g\":\"9.8\",\"n\":\"0.1\"}}},\"status\":{\"level\":\"ok\",\"text\":\"Ok\"},\"x\":169.671875,\"y\":132,\"ports\":[{\"pos\":3.5}]},{\"name\":\"initState\",\"type\":\"Param\",\"props\":{\"data\":{\"value\":{\"q\":\"3\",\"dq\":0,\"t\":0}}},\"status\":{\"level\":\"ok\",\"text\":\"Ok\"},\"x\":380.671875,\"y\":127,\"ports\":[{\"pos\":3.17631283417305}]},{\"name\":\"ode\",\"type\":\"CxxOde\",\"props\":{\"src\":{\"value\":\"/*#\\ntitle: Damped pendulum\\nkeywords: pendulum\\n\\n# Damped pendulum\\n\\nThe damped pendulum equation of motion is as follows:\\n$$\\n\\\\ddot\\\\varphi + 2n\\\\dot\\\\varphi + \\\\frac gl \\\\sin\\\\varphi = 0\\n$$\\nIt is similar to ?[simple pendulum](/doc#box/Pendulum),\\nbut here we have the additional term $2n\\\\dot\\\\varphi$.\\n*/\\n\\n#include <cmath>\\n\\nstruct DampedPendulum {\\n    int paramCount() const {\\n        return 3;       // l, g, n\\n    }\\n    const char *paramNames() const {\\n        return \\\"l,g,n\\\";   // Can also return empty string or null ptr\\n    }\\n    int varCount() const {\\n        return 2;       // q, dq\\n    }\\n    const char *varNames() const {\\n        return \\\"q,dq\\\";  // Can also return empty string or null ptr\\n    }\\n\\n    // Auxiliary parameters\\n    double g_l, _2n;\\n    void prepare(const double *param) {\\n        g_l = param[1]/param[0];\\n        _2n = 2*param[2];\\n    }\\n\\n    void rhs(double *out, const double *param, const double *state) const {\\n        out[0] = state[1];\\n        out[1] = -g_l * sin(state[0]) - _2n*state[1];\\n    }\\n};\\n\\n\"},\"srcExample\":{\"value\":\"#include <cmath>\\n\\nstruct pendulum {\\n    int paramCount() const {\\n        return 2;       // l, g\\n    }\\n    const char *paramNames() const {\\n        return \\\"l,g\\\";   // Can also return empty string or null ptr\\n    }\\n    int varCount() const {\\n        return 2;       // q, dq\\n    }\\n    const char *varNames() const {\\n        return \\\"q,dq\\\";  // Can also return empty string or null ptr\\n    }\\n\\n    // Auxiliary parameters\\n    double g_l;\\n    void prepare(const double *param) {\\n        g_l = param[1]/param[0];\\n    }\\n\\n    void rhs(double *out, const double *param, const double *state) const {\\n        out[0] = state[1];\\n        out[1] = -g_l * sin(state[0]);\\n    }\\n};\\n\"},\"useQmake\":{\"value\":true}},\"status\":{\"level\":\"ok\",\"text\":\"Ok\"},\"x\":192.671875,\"y\":206,\"ports\":[{\"pos\":1.4908018355819235},{\"pos\":0.7},{\"pos\":0.3}]},{\"name\":\"solver\",\"type\":\"Rk4\",\"props\":{},\"status\":{\"level\":\"ok\",\"text\":\"Ok\"},\"x\":331.671875,\"y\":206,\"ports\":[{\"pos\":1.8918301873981531},{\"pos\":1.2566593035343034},{\"pos\":2.7},{\"pos\":0.5},{\"pos\":3.886963717673304},{\"pos\":2.3},{\"pos\":3.565590293235549}]},{\"name\":\"canvas\",\"type\":\"Canvas\",\"props\":{\"param\":{\"value\":{\"x\":{\"vmin\":\"-6\",\"vmax\":\"6\",\"resolution\":350},\"y\":{\"vmin\":\"-12\",\"vmax\":\"12\",\"resolution\":350}}},\"refreshInterval\":{\"value\":0},\"timeCheckCount\":{\"value\":100},\"clearOnRestart\":{\"value\":false},\"withInputValue\":{\"value\":false}},\"status\":{\"level\":\"ok\",\"text\":\"Ok\"},\"x\":375.671875,\"y\":359.9999694824219,\"ports\":[{\"pos\":1.4664109158675749},{\"pos\":1.9227032111565825},{\"pos\":2.5},{\"pos\":0.551923360595283},{\"pos\":3.5}]},{\"name\":\"bitmap\",\"type\":\"Bitmap\",\"props\":{\"fileName\":{\"value\":\"result.png\"},\"valueRange\":{\"value\":{\"vmin\":\"0\",\"vmax\":\"1\"}},\"colorMap\":{\"value\":[{\"pos\":0,\"color\":16777215},{\"pos\":\"1\",\"color\":0}]}},\"status\":{\"level\":\"ok\",\"text\":\"Ok\"},\"x\":379.6718444824219,\"y\":423,\"ports\":[{\"pos\":1.529644631502921}]},{\"name\":\"proj\",\"type\":\"Projection\",\"props\":{\"indices\":{\"value\":[0,1]}},\"status\":{\"level\":\"ok\",\"text\":\"Ok\"},\"x\":398.65625,\"y\":276,\"ports\":[{\"pos\":1.816985596707819},{\"pos\":3.3977564102564104}]},{\"name\":\"solverParam\",\"type\":\"Param\",\"props\":{\"data\":{\"value\":{\"h\":\"h\",\"n\":\"100000\",\"nout\":\"1\"}}},\"status\":{\"level\":\"ok\",\"text\":\"Ok\"},\"x\":213,\"y\":63,\"ports\":[{\"pos\":3.9320349119120737}]}],\"links\":[{\"source\":{\"box\":\"solver\",\"port\":\"nextState\"},\"target\":{\"box\":\"proj\",\"port\":\"input\"}},{\"source\":{\"box\":\"ode\",\"port\":\"parameters\"},\"target\":{\"box\":\"odeParam\",\"port\":\"output\"}},{\"source\":{\"box\":\"ode\",\"port\":\"state\"},\"target\":{\"box\":\"solver\",\"port\":\"rhsState\"}},{\"source\":{\"box\":\"ode\",\"port\":\"oderhs\"},\"target\":{\"box\":\"solver\",\"port\":\"rhs\"}},{\"source\":{\"box\":\"canvas\",\"port\":\"output\"},\"target\":{\"box\":\"bitmap\",\"port\":\"input\"}},{\"source\":{\"box\":\"proj\",\"port\":\"output\"},\"target\":{\"box\":\"canvas\",\"port\":\"input\"}},{\"source\":{\"box\":\"solverParam\",\"port\":\"output\"},\"target\":{\"box\":\"solver\",\"port\":\"parameters\"}},{\"source\":{\"box\":\"solver\",\"port\":\"finish\"},\"target\":{\"box\":\"canvas\",\"port\":\"flush\"}},{\"source\":{\"box\":\"initState\",\"port\":\"output\"},\"target\":{\"box\":\"solver\",\"port\":\"initState\"}}]}"}